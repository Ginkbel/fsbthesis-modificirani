% Modificirani FSBthesis style, promjene za zadovoljavanje FSB Word predloška


% FSBthesis. fsbthesis.sty
% Jurica Vučković


\newcommand\FSBFileInfo{2024/07/27, ver.3.2.4}
\typeout{-> FSB thesis style, \FSBFileInfo}
%
\ProvidesPackage{fsbthesis}[\FSBFileInfo]
\NeedsTeXFormat{LaTeX2e}
\RequirePackage{subfigure}
\RequirePackage{ifthen}
\RequirePackage{longtable}
\RequirePackage{fancyhdr}
\RequirePackage{indentfirst}
\RequirePackage{array}
\RequirePackage{ifpdf}

\ifpdf
 \RequirePackage[pdftex]{graphicx}
 \pdfcompresslevel=9
 \RequirePackage[pdftex,
             colorlinks=true,
             linkcolor=blue,
             filecolor=red,
             citecolor=blue,
			 pdftitle={Naslov doktorske disertacije/diplomskog/zavrsnog rada},
			 pdfsubject={Modificirani FSBthesis stil - prilagođen za Word},
			 pdfauthor={Jurica Vučković},
             pdfstartview=FitV,
			 pdfpagemode=UseOutlines,
			 linktocpage=true,
			 bookmarksnumbered=true
             ]{hyperref}

\RequirePackage{caption}
\captionsetup{
  font=small,
  labelfont=normal,
  format=plain,
  labelsep=colon,
  justification=justified
}

% \let\WriteBookmarks\relax 
	% otkomentiraj ovu liniju ako ne zelis da pdftex pise informacije za bookmarke
 \DeclareGraphicsExtensions{.jpg,.pdf,.png,.mps}
 \DeclareGraphicsRule{*}{mps}{*}{} 
 		% ovim graphics pretpostavlja ekstenziju .mps za svaku datoteku kojoj ne
		% prepoznaje ekstenziju (.mps == izlazi mp)
\else
 \RequirePackage[dvips]{graphicx}
 \newcommand{\href}[2]{\normalfont #2}
 \DeclareGraphicsExtensions{.eps,.mps}
\fi

\newcommand{\FSBthesisname}{moj doktorat} %dummy def
\newcommand{\FSBautor}{mr.~sc.~ime prezime} %dummy def
\newcommand{\FSBmentor}{moj mentor}
\newcommand{\FSBgodina}{2003.}
\newcommand{\FSBdizajn}{moj dizajn} %dummy def
\newcommand{\FSBsdizajn}{moj dizajn} %dummy def
\newcommand{\FSBkljucnerijeci}{moje klju\v{c}ne rije\v{c}i u sa\v{z}etku}
\newcommand{\FSBkeywords}{my keywords}
\newcommand{\FSBbibudk}{625.xxx}
\newcommand{\FSBbibkljuc}{\FSBkljucnerijeci}
\newcommand{\FSBbibmentor}{\FSBmentor}
\newcommand{\FSBbibznpolje}{zrakoplovstvo}
\newcommand{\FSBbibinst}{\fsb}
\newcommand{\FSBbibdatumobr}{15.srpnja 2024.}
\newcommand{\FSBbibpovjerenstvo}{moje povjerenstvo}
\newcommand{\FSBbibinstpoh}{\fsb, \newline \unizg}

% dummy komande za pdf buduci da iz nekog razloga s pdftex-om LastPage ne radi!
\newcommand{\FSBpdfbrojstrana}{xx}
\newcommand{\FSBpdfbrojslika}{xx}
\newcommand{\FSBpdfbrojtablica}{xx}
\newcommand{\FSBpdfbrojrefs}{xx}

\DeclareOption{zavrsni}{\renewcommand\FSBthesisname{zavr\v sni rad}}
\DeclareOption{diplomski}{\renewcommand\FSBthesisname{diplomski rad}}
\DeclareOption{master}{\renewcommand\FSBthesisname{master's thesis}}
\DeclareOption{doktorat}{\renewcommand\FSBthesisname{doktorska disertacija}}
\DeclareOption{avant}{\renewcommand\FSBdizajn{avant}}
\DeclareOption{draft}{\renewcommand\FSBsdizajn{draft}}
\DeclareOption*{\PackageWarrning{fsbthesis}{Zasada nepoznata opcija '\CurrentOption'}}
\ExecuteOptions{doktorat,avant} %default opicije
\ProcessOptions\relax

%-- prepravke hrvatskog nazivlja
\addto\captionscroatian{%
  \def\prefacename{Predgovor}%
  \def\refname{\MakeUppercase{Literatura}}%
  \def\abstractname{\MakeUppercase{Summary}}%
  \def\sazetakime{\MakeUppercase{Sa\v{z}etak}}%
  \def\bibname{\MakeUppercase{Literatura}}%
  \def\chaptername{Poglavlje}%
  \def\appendixname{Dodatak}%
  \def\contentsname{\MakeUppercase{Sadr\v{z}aj}}%
  \def\listfigurename{\MakeUppercase{Popis slika}}%
  \def\listtablename{\MakeUppercase{Popis tablica}}%
  \def\indexname{Indeks}%
  \def\figurename{Slika}%
  \def\tablename{Tablica}%
  \def\partname{Dio}%
  \def\enclname{Prilozi}%
  \def\ccname{Kopije}%
  \def\headtoname{Prima}%
  \def\pagename{Strana}%
  \def\seename{Vidi}%
  \def\alsoname{Vidi tako{\dj}er}%
  \def\proofname{Dokaz}%
  \def\zivotopisime{\v{Z}ivotopis}%
  \def\izjavaime{Izjava}%
  \def\popoznime{\MakeUppercase{Popis oznaka}}%
  \def\nomname{\MakeUppercase{Popis oznaka}}%
  \def\fsb{Fakultet strojarstva i brodogradnje}
  \def\unizg{Sveu\v{c}ili\v{s}te u Zagrebu}
  }%

% %-- prepravke engleskog nazivlja
\addto\captionsenglish{%
  \def\abstractname{\MakeUppercase{Summary}}%
  \def\izjavaime{Statement}%
  \def\popoznime{List of Symbols}%
  \def\nomname{List of Symbols}%
  \def\fsb{Faculty of Mechanical Engineering and Naval Architecture}%
  \def\unizg{University of Zagreb}%
   }%


%-- korisne definicije
\newcommand{\ver}{\mbox{ver.0-0}}
\newcommand{\verzija}{\ver/\today}


%-- korekcije dimenzija
\usepackage[
  paperwidth=210mm,
  paperheight=297mm,
  inner=25mm,
  outer=25mm, %,top=23.36mm
  top=25mm, %26mm+26pt+25pt
  bottom=25mm,
  vcentering
]{geometry}
\addtolength{\headheight}{0.5cm}
\newlength{\duljnaslpogl}
\linespread{1.3} %razmak izme{\dj}u redova: 1.3 - 1+1/2razmak; 1.6 - 2razmak

%-- korekcije izleda naslova, zaglavlja, ...
\renewcommand \thechapter      {\@arabic\c@chapter.}
\newcommand{\thechapterx}{\@arabic\c@chapter}
\renewcommand{\thesection}{\thechapter\@arabic\c@section.}
\renewcommand{\thesubsection}{\thesection\@arabic\c@subsection.}
\renewcommand{\thesubsubsection}{\thesubsection\@arabic\c@subsubsection.}

\renewcommand{\theequation}{\thechapter\@arabic\c@equation}
\renewcommand{\thefigure}{\thechapter\@arabic\c@figure}
\renewcommand{\thetable}{\thechapter\@arabic\c@table}
\renewcommand{\thesubfigure}{ \alph{subfigure}}

%-- brojaci
\newcounter{brojslika}
\newcommand \theslika{\arabic{brojslika}}
\newcounter{brojtablica}
\newcommand \thetablica{\arabic{brojtablica}}
\newcounter{brojstrana}
\setcounter{brojstrana}{-1} %moram skinuti u broju sljedecu stranicu.
\newcommand \thestrana{\arabic{brojstrana}}

% komande za popis oznaka u nomenklaturnom stilu 
\newcommand{\dottfill}{%
  \leavevmode
  \cleaders \hb@xt@ .8em{\hss.\hss}\hfill
  \kern\z@}
\ifpdf
	\renewcommand{\pagedeclaration}[1]{\dottfill \hyperpage{#1}}%
\else
\renewcommand{\pagedeclaration}[1]{\dottfill \nobreakspace#1}%
\fi
\setlength{\nomitemsep}{-\parsep}
\addtolength{\nomitemsep}{0.2pt}
\ifthenelse{\equal{\FSBthesisname}{master's thesis}}{%
  %\renewcommand{\nomname}{List of Symbols}
  \renewcommand{\nomgroup}[1]{%
	  \ifthenelse{\equal{#1}{K}}{\bigskip\par\item[\textbf{\large Abbrevatons}]}{%
	  \ifthenelse{\equal{#1}{I}}{\bigskip\par\item[\textbf{\large Subscripts}]}{%
	  \ifthenelse{\equal{#1}{T}}{\bigskip\par\item[\textbf{\large Accents}]}{}}} }
  }{%
  % \renewcommand{\nomname}{Popis oznaka}
  \renewcommand{\nomgroup}[1]{%
    \ifthenelse{\equal{#1}{K}}{\bigskip\hfill\par\item[\textbf{\large Kratice}]}{%
    \ifthenelse{\equal{#1}{I}}{\bigskip\hfill\par\item[\textbf{\large Indeksi}]}{%
    \ifthenelse{\equal{#1}{T}}{\bigskip\hfill\par\item[\textbf{\large Akcenti}]}}}}
	}%
%-- dizajn stranice
\ifthenelse{\equal{\FSBdizajn}{avant}}{%
    \pagestyle{fancyplain}
    \fancyhf{}
    \fancyhead[L]{\fontsize{10}{12}\selectfont\textit{\FSBautor}}
    \fancyhead[R]{\fontsize{10}{12}\selectfont\textit{Diplomski rad}}
    \fancyfoot[L]{\fontsize{10}{12}\selectfont\textit{Fakultet strojarstva i brodogradnje}}
    \fancyfoot[R]{\fontsize{10}{12}\selectfont\textit{\thepage}}
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}
    }{}

%-- obavezni elementi
\newcommand{\fsbkorice}{
    \newpage
    \thispagestyle{empty}
    \setcounter{page}{0}
    \begin{center}
      \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
      \vspace{4.0cm}
      {\LARGE \textsc{\@title} \\}
      \bigskip
      \textsc{\large \FSBthesisname} \\
      \vspace{3cm}
      \hfill \textrm{\large \@author}
      \vfill
      \textsc{Zagreb, \FSBgodina}
    \end{center}
}
\newcommand{\fsbprvilist}{
    \pagebreak
    \thispagestyle{empty}
    \begin{center}
      \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
      \vspace{4cm}
      {\LARGE \textsc{\@title} \\}
      \bigskip
      \textsc{\large \FSBthesisname} \\
      \vspace{3cm}
	  \textrm{\begin{minipage}[b]{7cm}
		  		Mentor:\newline
		  		\large{\FSBmentor}
			\end{minipage}} \hfill \textrm{\large{\FSBautor}}
      \vfill
      \textsc{Zagreb, \FSBgodina}
    \end{center}
}
\ifpdf
\newcommand{\fsbbiblist}{%
    \pagebreak
    \linespread{1} %razmak izme{\dj}u redova: 1.3 - 1+1/2razmak; 1.6 - 2razmak
    \thispagestyle{empty}
    \vspace{1cm}
    \begin{center}
      \textbf{\large Podaci za bibliografsku karticu}
    \end{center}
    \vspace{2cm}

    \hspace{-1.5cm}%
	\noindent\begin{tabular}{p{0.48\textwidth} p{0.52\textwidth}}
     \hfill\emph{UDK:} & \FSBbibudk \\
     \hfill\emph{Klju\v{c}ne rije\v{c}i:} & \FSBbibkljuc \\
     \hfill\emph{Znanstveno podru\v{c}je:} & tehni\v{c}ke znanosti\\
     \hfill\emph{Znanstveno polje:} & \FSBbibznpolje \\
     \hfill\emph{Institucija u kojoj je rad izra{\dj}en:} & \FSBbibinst \\
     \hfill\emph{Mentor:} & \FSBbibmentor \\
     \hfill\emph{Broj stranica:} & \FSBpdfbrojstrana \\ %\pageref{LastPage} % OPREZ! korigirati za stvarni broj
	 \hfill\emph{Broj slika:} & \FSBpdfbrojslika \\ % OPREZ! korigirati za stvarni broj
     \hfill\emph{Broj tablica:} & \FSBpdfbrojtablica \\ % OPREZ! korigirati za stvarni broj
     \hfill\emph{Broj kori\v{s}tenih bibliografskih jedinica:} & \FSBpdfbrojrefs \\ % OPREZ! korigirati za stvarni broj
     \hfill\emph{Datum obrane:} & \FSBbibdatumobr \\
     \hfill\emph{Povjerenstvo:} & \FSBbibpovjerenstvo \\
     \hfill\emph{Institucija u kojoj je rad pohranjen:} & \FSBbibinstpoh
    \end{tabular}
    }
\else
\newcommand{\fsbbiblist}{%
    \pagebreak
    \linespread{1} %razmak izme{\dj}u redova: 1.3 - 1+1/2razmak; 1.6 - 2razmak
    \thispagestyle{empty}
    \vspace{1cm}
    \begin{center}
      \textbf{\large Podaci za bibliografsku karticu}
    \end{center}
    \vspace{2cm}
	
 %    \noindent\begin{tabular}{p{7cm} p{7cm}}
    \hspace{-1.5cm}%
	\noindent\begin{tabular}{p{0.48\textwidth} p{0.52\textwidth}}
     \hfill\emph{UDK:} & \FSBbibudk \\
     \hfill\emph{Klju\v{c}ne rije\v{c}i:} & \FSBbibkljuc \\
     \hfill\emph{Znanstveno podru\v{c}je:} & tehni\v{c}ke znanosti\\
     \hfill\emph{Znanstveno polje:} & \FSBbibznpolje \\
     \hfill\emph{Institucija u kojoj je rad izra{\dj}en:} & \FSBbibinst \\
     \hfill\emph{Mentor:} & \FSBbibmentor \\
     \hfill\emph{Broj stranica:} & \pageref{LastPageS} \\ %\pageref{LastPage}
	 \hfill\emph{Broj slika:} & \pageref{LastPageF} \\
     \hfill\emph{Broj tablica:} & \pageref{LastPageT} \\
     \hfill\emph{Broj kori\v{s}tenih bibliografskih jedinica:} & \pageref{LastPageRef} \\
     \hfill\emph{Datum obrane:} & \FSBbibdatumobr \\
     \hfill\emph{Povjerenstvo:} & \FSBbibpovjerenstvo \\
     \hfill\emph{Institucija u kojoj je rad pohranjen:} & \FSBbibinstpoh
    \end{tabular}
    }
\fi

\newcommand{\popozn}{
   \chapter*{\popoznime
        \@mkboth{%
           \MakeUppercase\popoznime}{\MakeUppercase\popoznime}}%
%   \addcontentsline{toc}{chapter}{{\numberline {}\popoznime}}
   }

\ifthenelse{\equal{\FSBdizajn}{avant}}{%
    \renewcommand{\fsbkorice}{
        \newpage
        \thispagestyle{empty}
        \setcounter{page}{0}
        \begin{center}
          \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
          \vspace{4.7cm}
          {\LARGE \bfseries\@title \\}
          \bigskip
          \textsc{\large \FSBthesisname} \\
	   	  \ifthenelse{\equal{\FSBsdizajn}{draft}}{--- \verzija --- \\}{}
          \vspace{3cm}
		  \hfill\textrm{\large \@author}
%          \textrm{\large{\FSBmentor}} \hfill \textrm{\large \@author}
          \vfill
          \textsc{Zagreb, \FSBgodina}\\
        \end{center}}
    \renewcommand{\fsbprvilist}{
        \pagebreak
        \thispagestyle{empty}
        \begin{center}
          \null
		  \begin{tabular}{l|r}
		  \begin{minipage}[b]{4.9cm}
		    \vspace{0.2cm}
		    \begin{center}
		    % \includegraphics[height=2.45cm]{unizg_plavi_t2}\hspace{2pt}%
		    % \includegraphics[height=2.415cm]{fsb_logo_v} %\\ \vspace{1ex}
		    \end{center}
		  \end{minipage} &
		  \begin{minipage}[b]{8cm}
		      \begin{flushleft}
		    	  \textsf{Sveučilište u Zagrebu}\\%\vspace{.2cm}
		    	  \textsf{Fakultet strojarstva i brodogradnje}\\
		    	  \mbox{ }\\\vspace{.5cm}
		      \end{flushleft}
		  \end{minipage}\\
		  \end{tabular}\\
          \vspace{4.0cm}
          {\LARGE \bfseries\@title \\}
          \bigskip
          \textsc{\large \FSBthesisname} \\
	   	  \ifthenelse{\equal{\FSBsdizajn}{draft}}{--- \verzija --- \\}{}
          \vspace{3cm}
		  \textrm{\begin{minipage}[b]{7cm}
		  		Mentor:\newline
		  		\large{\FSBmentor}
			\end{minipage}} \hfill \textrm{\large \FSBautor}
%          \textrm{\large{\FSBmentor}} \hfill \textrm{\large \@author}
          \vfill
          \textsc{Zagreb, \FSBgodina}
        \end{center}}
    } % zavrsetak promjena za alernativni dizajn
    {} %u suprotnom nista

\ifthenelse{\equal{\FSBdizajn}{alter}}{%
    \renewcommand{\fsbkorice}{
        \newpage
        \thispagestyle{empty}
        \setcounter{page}{0}
        \begin{center}
          \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
          \vspace{4.7cm}
%          \vspace{4.0cm}
          {\LARGE \@title \\}
          \bigskip
          \textsc{\large \FSBthesisname} \\
          \vspace{3cm}
          \hfill \textrm{\large \@author}
          \vfill
          \textsc{Zagreb, \FSBgodina}
        \end{center}}
    \renewcommand{\fsbprvilist}{
        \pagebreak
        \thispagestyle{empty}
        \begin{center}
          \null
          \begin{tabular}{m{3cm} m{7cm} m{3cm}}
          \raggedleft
          \includegraphics[width=2.5cm]{fsb_logo} & %\hspace{.5cm}
               \begin{flushleft}
                     \textsf{\unizg}\\
                     \vspace{-.1cm}\textsf{\fsb}
               \end{flushleft}
          & %\hspace{.5cm}
                \raggedright
                \includegraphics[width=2.5cm]{suz_grb}
          \end{tabular}\\
          \vspace{4.0cm}
          {\LARGE \@title \\}
          \bigskip
          \textsc{\large \FSBthesisname} \\
          \vspace{3cm}
		  \textrm{\begin{minipage}[b]{7cm}
		  		Mentor:\newline
		  		\large{\FSBmentor}
			\end{minipage}} \hfill \textrm{\large \FSBautor}
%          \textrm{\large{\FSBmentor}} \hfill \textrm{\large \@author}
          \vfill
          \textsc{Zagreb, \FSBgodina}
        \end{center}}
    } % zavrsetak promjena za alernativni dizajn
    {} %u suprotnom nista

%-- promjene za zavrsni rad
\ifthenelse{\equal{\FSBthesisname}{zavr\v sni rad}\or\equal{\FSBthesisname}{diplomski rad}\or\equal{\FSBthesisname}{master's thesis}}{%
\renewcommand{\fsbkorice}{
    \newpage
    \thispagestyle{empty}
	\ifthenelse{\equal{\FSBthesisname}{master's thesis}}{%
	\selectlanguage{english}}{%
	\selectlanguage{croatian}}
    \setcounter{page}{0}
    \begin{center}
      \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
      \vspace{4.0cm}
%      {\LARGE \textsc{\@title} \\}
      {\Huge \textsc{\FSBthesisname} \\}
      \bigskip
%      \textsc{\large \FSBthesisname} \\
	  \textsc{\large \mbox{ }} \\
	   	  \ifthenelse{\equal{\FSBsdizajn}{draft}}{--- \verzija --- \\}{}
      \vspace{3cm}
      \hfill \textrm{\large \@author}
      \vfill
      \textsc{Zagreb, \FSBgodina}
    \end{center}
}
\renewcommand{\fsbprvilist}{
    \pagebreak
    \thispagestyle{empty}
	\ifthenelse{\equal{\FSBthesisname}{master's thesis}}{%
	\selectlanguage{english}}{%
	\selectlanguage{croatian}}
    \begin{center}
      \null
      \textsc{\large \unizg}\\
      \smallskip
      \textsc{\large \fsb} \\
      \vspace{4cm}
%      {\LARGE \textsc{\@title} \\}
      {\Huge \textsc{\FSBthesisname} \\}
      \bigskip
      \textsc{\large \@title \\}
	   	  \ifthenelse{\equal{\FSBsdizajn}{draft}}{--- \verzija --- \\}{}
      \vspace{3cm}
	  \textrm{\begin{minipage}[b]{7cm}
		  		Mentor:\newline % u sluÄŤaju viĹˇe mentora - treba popraviti u 'Mentori'
		  		\large{\FSBmentor}
			\end{minipage}} \hfill \textrm{\begin{minipage}[b]{7cm}
				\begin{flushright} \hfill Student:\newline%
					\large{\FSBautor}\end{flushright}
			\end{minipage}}
      \vfill
      \textsc{Zagreb, \FSBgodina}
    \end{center}
	% \newpage
    %     \thispagestyle{empty}
    %     \vspace*{8cm}
	% 	\begin{center}%
	% 		\emph{--- Ovdje umetni tekst zadataka za~\FSBthesisname! --- }
	% 	\end{center}
}
\renewcommand{\fsbbiblist}{\relax}
    } % zavrsetak promjena za zavrsni rad
    {} %u suprotnom nista



%-- definicije okolina:
\newenvironment{zahvala}{%
    \newpage
    \thispagestyle{empty}
    \null\vfill
	\begin{minipage}{8cm}%
    }%
    {%
    \end{minipage}
    \par
    }%

\newenvironment{izjava}{%
    \newpage
    \thispagestyle{empty}
	\null\vspace{2cm}
	\noindent\begin{minipage}{\textwidth}%{8cm}%
		%\textrm{\bfseries \large{\izjavaime}}\newline\par
		\ifthenelse{\equal{\FSBthesisname}{master's thesis}}{%
		\textrm{\bfseries \large{\izjavaime~\textbar~Izjava}}\newline\par}{%
		\textrm{\bfseries \large{\izjavaime}}\newline\par
		}
    }%
    {%
    \end{minipage}
    \par\vspace{3cm} \noindent \@date \hfill \FSBautor
  \newpage
    \thispagestyle{empty}
    \begin{figure}[htbp]
      \vfill
      \centering
      \includegraphics[width=\textwidth]{Misc/tekst_diplomskog.jpeg}
      \vfill
    \end{figure}
    }

\newenvironment{prosirenisazetak}{%
    \newpage
    \thispagestyle{plain}
	\selectlanguage{croatian}
	\ifpdf
		\phantomsection
	\fi
	\ifthenelse{\equal{\FSBdizajn}{avant}}{%
		\vspace*{1\p@}%
		\noindent\begin{tabular}{r|l}
			\begin{minipage}[t]{1cm}
				\relax\vspace{3cm}	
			\end{minipage} &
			\hspace*{0.5cm}\begin{minipage}[t]{10cm}
				\huge \sffamily\bfseries Prošireni sažetak \par\nobreak
			\end{minipage}
		\end{tabular}
    \addcontentsline{toc}{chapter}{{\numberline {}Prošireni sažetak}}
	\markboth{\MakeUppercase Prošireni sažetak}{\MakeUppercase Prošireni sažetak}
    \interlinepenalty\@M
    \vskip 80\p@
	}{%
	\vspace*{70\p@}
	\textbf{\huge Prošireni sažetak}
    \addcontentsline{toc}{chapter}{{\numberline {}Prošireni sažetak}}
	\markboth{\MakeUppercase Prošireni sažetak}{\MakeUppercase Prošireni sažetak}
    \interlinepenalty\@M
    \vskip 40\p@
	%\null\vfil
	}%	  
        }%
		{\selectlanguage{english}}%{\par\vspace{2.5cm} \noindent \@date \hfill \FSBautor}


\newenvironment{predgovor}{%
    \newpage
    \thispagestyle{empty}
	\ifpdf
		\phantomsection
	\fi
	\ifthenelse{\equal{\FSBdizajn}{avant}}{%
		\vspace*{1\p@}%
		\noindent\begin{tabular}{r|l}
			\begin{minipage}[t]{1cm}
				\relax\vspace{3cm}	
			\end{minipage} &
			\hspace*{0.5cm}\begin{minipage}[t]{10cm}
				\huge \sffamily\bfseries \prefacename \par\nobreak
			\end{minipage}
		\end{tabular}
    \addcontentsline{toc}{chapter}{{\numberline {}\prefacename}}
    \interlinepenalty\@M
    \vskip 80\p@
	}{%
	\textbf{\huge \prefacename}
    \addcontentsline{toc}{chapter}{{\numberline {}\prefacename}}
      \null\vfil
	}%	  
        }%
		{\par\vspace{2.5cm} \noindent \@date \hfill \FSBautor}

    \newenvironment{sazetak}{%
      \newpage
      \thispagestyle{fancyplain}
      \phantomsection
      \addcontentsline{toc}{chapter}{\protect\numberline{}\sazetakime}
      {\noindent\raggedright
        \normalfont\fontsize{14pt}{16pt}\bfseries
        \MakeUppercase{\sazetakime}\par\nobreak
        \vskip 18\p@}
    }%
    {\bigskip
    \begin{flushleft}\textbf{Klju\v{c}ne rije\v{c}i:} \FSBkljucnerijeci  \end{flushleft}
        \par\vfil\null}
    %}

    \renewenvironment{abstract}{%
      \newpage
      \thispagestyle{fancyplain}
      \phantomsection
      \addcontentsline{toc}{chapter}{\protect\numberline{}\abstractname}
      {\noindent\raggedright
        \normalfont\fontsize{14pt}{16pt}\bfseries
        \MakeUppercase{\abstractname}\par\nobreak
        \vskip 18\p@}
    }%
    {\bigskip
    \begin{flushleft}\textbf{Keywords:} \FSBkeywords  \end{flushleft}
        \par\vfil\null}

\newenvironment{zivotopis}{%
      \newpage
      \thispagestyle{plain}
	  \ifpdf
	  	\phantomsection
	  \fi
      \addcontentsline{toc}{chapter}{{\numberline {}\zivotopisime}}
      \null\vfil
      \begin{center}%
	  \ifthenelse{\equal{\FSBdizajn}{avant}}{%
		\huge{\textsf{\bfseries \zivotopisime}}
		}{%
		\huge{\bfseries \zivotopisime}}
        \vspace{0.7cm}
      \end{center}}%
     {\par\vfil\null}

\newenvironment{shortbio}{%
      \newpage
      \thispagestyle{plain}
	  \ifpdf
	    \phantomsection
	  \fi
      \addcontentsline{toc}{chapter}{{\numberline {}Biography}}
      \null\vfil
      \begin{center}%
	  \ifthenelse{\equal{\FSBdizajn}{avant}}{%
		  \huge{\textsf{\bfseries Biography}}
		  }{%
          \huge{\bfseries Biography}}
        \vspace{0.7cm}
      \end{center}}%
     {\par\vfil\null}

\newenvironment{unapomene}{%
     \usefont{OT1}{cmss}{m}{n}}%
     {}

%-- brojaci slika, tablica, refernci
\newcounter{fig}
\def\lastpagef@putlabelf{\addtocounter{fig}{-1}%
   \immediate\write\@auxout{\string
   \newlabel{LastPageF}{{}{\theslika}}}%
   \addtocounter{fig}{1}}
\AtEndDocument{%
   \message{AED: lastpage-fig setting LastPageF}%
   \clearpage\lastpagef@putlabelf}%

\renewcommand{\p@subfigure}{\thefigure}

\newcounter{tabl}
\def\lastpaget@putlabelt{\addtocounter{tabl}{-1}%
   \immediate\write\@auxout{\string
   \newlabel{LastPageT}{{}{\thetablica}}}%
   \addtocounter{tabl}{1}}
\AtEndDocument{%
   \message{AED: lastpage-tablice setting LastPageT}%
   \clearpage\lastpaget@putlabelt}%

\newcounter{refer}
\def\lastpager@putlabelr{\addtocounter{refer}{-1}%
   \immediate\write\@auxout{\string
   \newlabel{LastPageRef}{{}{\arabic{enumiv}}}}%
   \addtocounter{refer}{1}}
\AtEndDocument{%
   \message{AED: lastpage-literatura setting LastPageT}%
   \clearpage\lastpager@putlabelr}%

\newcounter{strn}
\def\lastpages@putlabels{\addtocounter{strn}{-1}%
   \immediate\write\@auxout{\string
   \newlabel{LastPageS}{{}{\thestrana}}}%
   \addtocounter{strn}{1}}
\AtEndDocument{%
   \addtocounter{brojstrana}{\arabic{page}}
   \message{AED: lastpage-fig setting LastPageS}%
   \clearpage\lastpages@putlabels}%

   \usepackage{titlesec}

  % Define custom chapter, section, and subsection formats
  \titleformat{\chapter}[block]
    {\normalfont\fontsize{14pt}{16pt}\bfseries}{\thechapter}{1em}{\MakeUppercase}
  \titleformat{\section}[block]
    {\normalfont\fontsize{12pt}{14pt}\bfseries}{\thesection}{1em}{}
  \titleformat{\subsection}[block]
    {\normalfont\fontsize{12pt}{14pt}\bfseries\itshape}{\thesubsection}{1em}{}

  % Custom chapter definition for avant style
  \ifthenelse{\equal{\FSBdizajn}{avant}}{%
  \renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
                        \thispagestyle{fancyplain} % Use fancyplain for first page of chapter
                        \global\@topnum\z@
                        \@afterindentfalse
                        \secdef\@chapter\@schapter}
  \def\@chapter[#1]#2{\ifnum \c@secnumdepth >\m@ne
                        \refstepcounter{chapter}%
                        \typeout{\@chapapp\space\thechapter.}%
                        \addcontentsline{toc}{chapter}%
                                  {\protect\numberline{\thechapter}#1}%
                      \else
                        \addcontentsline{toc}{chapter}{#1}%
                      \fi
                      \chaptermark{#1}%
                      \addtocontents{lof}{\protect\addvspace{10\p@}}%
                      \addtocontents{lot}{\protect\addvspace{10\p@}}%
                      \if@twocolumn
                        \@topnewpage[\@makechapterhead{#2}]%
                      \else
                        \@makechapterhead{#2}%
                        \@afterheading
                      \fi}
  \def\@makechapterhead#1{%
    {\noindent\raggedright
      \normalfont\fontsize{14pt}{16pt}\bfseries
      \ifnum \c@secnumdepth >\m@ne
          \MakeUppercase{\thechapter\quad #1}\par\nobreak
      \fi
      \interlinepenalty\@M
      \vskip 18\p@
    }}
  \def\@makeschapterhead#1{%
    {\noindent\raggedright
      \normalfont\fontsize{14pt}{16pt}\bfseries
      \MakeUppercase{#1}\par\nobreak
      \interlinepenalty\@M
      \vskip 18\p@
    }}
  }{} % End of avant style customization

   

\renewcommand\appendix{\par
  \setcounter{chapter}{0}%
  \setcounter{section}{0}%
  \gdef\@chapapp{\appendixname}%
  \renewcommand{\thechapterx}{\@Alph\c@chapter}%
  \renewcommand{\thechapter}{\@Alph\c@chapter.}%
  \renewcommand{\theequation}{\thechapter\@arabic\c@equation}%
  \renewcommand{\thefigure}{\thechapter\@arabic\c@figure}%
  \renewcommand{\thetable}{\thechapter\@arabic\c@table}%
  \renewcommand{\thesubfigure}{ \alph{subfigure}}%
  }
  